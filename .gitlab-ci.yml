stages:
  - compile
  - test

image: gumjoe/wacc-ci-scala:slim

cache:
  key: $CI_COMMIT_REF_SLUG
  paths:
    - .bsp/
    - .scala-build/

compile:
  stage: compile
  before_script:
    - echo "Compiling..."
  script:
    - scala compile .
  after_script:
    - echo "Compilation done."

test:
  stage: test
  before_script:
    - apt-get update
    - echo "Installing GCC..."
    - apt-get install gcc
    - echo "GCC Installed."
    - echo "Installing Python..."
    - apt-get install -y python3 python3-pip
    - apt-get install -y python3-yaml
    - echo "Python Installed."
    - echo "Running Tests..."
  script:
    - python3 runSelectedTests.py
  after_script:
    - echo "Testing done."